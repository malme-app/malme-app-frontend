<div class="mypage-container">
    <div class="mypage-inner">
        <img src="../../../assets/images/logo_white.png" alt="StructuralEngine" class="logo-structuralengine" />
        <h1 class="page-title">会員情報</h1>

        <mat-card>
            <mat-card-content>
                <div class="border-1 pa-15">
                    <div class="login-info">
                        <div>
                            <mat-form-field>
                                <mat-label>ユーザー名</mat-label>
                                <input matInput readonly [value]="userInfo.keycloakProfile?.username" />
                            </mat-form-field>
                        </div>
                        <div>
                            <mat-form-field>
                                <mat-label>メールアドレス</mat-label>
                                <input matInput readonly [value]="userInfo.keycloakProfile?.email" />
                            </mat-form-field>
                        </div>
                        <div>
                            <mat-form-field>
                                <mat-label>姓</mat-label>
                                <input matInput readonly [value]="userInfo.keycloakProfile?.lastName" />
                            </mat-form-field>
                        </div>
                        <div>
                            <mat-form-field>
                                <mat-label>名</mat-label>
                                <input matInput readonly [value]="
                                        userInfo.keycloakProfile?.firstName
                                    " />
                            </mat-form-field>
                        </div>
                    </div>
                    <div class="text-right">
                        <a href="https://auth.structuralengine.com/realms/structural-engine/account/#/personal-info"
                            target="_blank">
                            <button mat-raised-button color="primary" class="btn-2">
                                変更<mat-icon>open_in_new</mat-icon>
                            </button>
                        </a>
                    </div>
                </div>
            </mat-card-content>
        </mat-card>
        <mat-card class="mt-15">
            <mat-card-content>
                <div class="border-1 pa-15">
                    <div *ngIf="!hasOrganization" class="mb-15">
                        あなたはどの組織にも含まれていません。<br />組織アカウントを作成するには、以下のフォームを入力してください。
                    </div>
                    <form [formGroup]="organizationForm" (ngSubmit)="onSubmitOrganizationForm()">
                        <div class="organization-info">
                            <div>
                                <mat-form-field>
                                    <mat-label>アカウント種類</mat-label>
                                    <mat-select required formControlName="organizationType">
                                        <mat-option [value]="0">個人</mat-option>
                                        <mat-option [value]="1">法人</mat-option>
                                        <mat-option [value]="2">大学</mat-option>
                                        <mat-option [value]="3">学生</mat-option>
                                    </mat-select>
                                </mat-form-field>
                                <mat-form-field>
                                    <mat-label>団体名 / 学校名 / 法人名</mat-label>
                                    <input matInput type="text" formControlName="organizationName" />
                                    <mat-error *ngIf="
                                            organizationFormControl.organizationName.hasError(
                                                'required'
                                            )
                                        ">
                                        このフィールドを入力してください。
                                    </mat-error>
                                </mat-form-field>
                                <mat-form-field>
                                    <mat-label>部署名</mat-label>
                                    <input matInput type="text" formControlName="department" />
                                    <mat-error *ngIf="
                                            organizationFormControl.department.hasError(
                                                'required'
                                            )
                                        ">
                                        このフィールドを入力してください。
                                    </mat-error>
                                </mat-form-field>
                                <mat-form-field>
                                    <mat-label>郵便番号</mat-label>
                                    <input matInput type="text" formControlName="zipcode" />
                                    <mat-error *ngIf="
                                            organizationFormControl.zipcode.hasError(
                                                'required'
                                            )
                                        ">
                                        このフィールドを入力してください。
                                    </mat-error>
                                </mat-form-field>
                                <mat-form-field>
                                    <mat-label>住所</mat-label>
                                    <input matInput type="text" formControlName="address" />
                                    <mat-error *ngIf="
                                            organizationFormControl.address.hasError(
                                                'required'
                                            )
                                        ">
                                        このフィールドを入力してください。
                                    </mat-error>
                                </mat-form-field>
                                <mat-form-field>
                                    <mat-label>TEL</mat-label>
                                    <input matInput type="tel" formControlName="tel" />
                                    <mat-error *ngIf="
                                            organizationFormControl.tel.hasError(
                                                'required'
                                            )
                                        ">
                                        このフィールドを入力してください。
                                    </mat-error>
                                </mat-form-field>
                            </div>
                            <div>
                                <mat-form-field>
                                    <mat-label>会員種別</mat-label>
                                    <mat-select required formControlName="userRole">
                                        <mat-option value="admin">管理者</mat-option>
                                        <mat-option value="member">メンバー</mat-option>
                                    </mat-select>
                                </mat-form-field>
                                <mat-form-field>
                                    <mat-label>銀行名</mat-label>
                                    <input matInput type="text" formControlName="bankName" />
                                    <mat-error *ngIf="
                                            organizationFormControl.bankName.hasError(
                                                'required'
                                            )
                                        ">
                                        このフィールドを入力してください。
                                    </mat-error>
                                </mat-form-field>
                                <mat-form-field>
                                    <mat-label>支店名</mat-label>
                                    <input matInput type="text" formControlName="branchName" />
                                    <mat-error *ngIf="
                                            organizationFormControl.branchName.hasError(
                                                'required'
                                            )
                                        ">
                                        このフィールドを入力してください。
                                    </mat-error>
                                </mat-form-field>
                                <mat-form-field>
                                    <mat-label>口座種別</mat-label>
                                    <input matInput type="text" formControlName="bankAccountType" />
                                    <mat-error *ngIf="
                                            organizationFormControl.bankAccountType.hasError(
                                                'required'
                                            )
                                        ">
                                        このフィールドを入力してください。
                                    </mat-error>
                                </mat-form-field>
                                <mat-form-field>
                                    <mat-label>口座番号</mat-label>
                                    <input matInput type="tel" formControlName="bankAccountNumber" />
                                    <mat-error *ngIf="
                                            organizationFormControl.bankAccountNumber.hasError(
                                                'required'
                                            )
                                        ">
                                        このフィールドを入力してください。
                                    </mat-error>
                                </mat-form-field>
                                <mat-form-field>
                                    <mat-label>利用可能ライセンス数</mat-label>
                                    <mat-select required formControlName="licenseNumber">
                                        <mat-option *ngFor="
                                                let item of [].constructor(20);
                                                let i = index
                                            " [value]="i + 1">
                                            {{ i + 1 }}
                                        </mat-option>
                                    </mat-select>
                                </mat-form-field>
                            </div>
                        </div>
                        <div *ngIf="hasOrganization" class="text-right">
                            <button mat-raised-button color="primary" type="submit" [disabled]="!organizationForm.valid"
                                class="btn-1">
                                変&nbsp;更
                            </button>
                        </div>
                        <div *ngIf="!hasOrganization" class="text-right">
                            <button mat-raised-button color="primary" type="submit" [disabled]="!organizationForm.valid"
                                class="btn-1">
                                作&nbsp;成
                            </button>
                        </div>
                    </form>
                </div>
            </mat-card-content>
        </mat-card>
    </div>
</div>
